#%Module1.0#####################################################################
##
## OpenMPI modulefile
##
proc ModulesHelp { } {
        global version prefix

        puts stderr "\topenmpi - openmpi 2.0.1 compiled against slurm 16.05.4"
}

module-whatis   "openmpi-2.0.1-slurm-16.05.4"

set      iigb_modules    $::env(IIGB_MODULES)
set      modules_dir     $::env(MODULES_DIR)

# for Tcl script use only
set     version         3.2.9
set     prefix          ${modules_dir}/${version}
set     exec_prefix     ${prefix}
set     datarootdir     ${prefix}/share

prepend-path    PATH             ${iigb_modules}/openmpi/2.0.1-slurm-16.05.4/bin
prepend-path    CPATH            ${iigb_modules}/openmpi/2.0.1-slurm-16.05.4/include
prepend-path    LIBRARY_PATH     ${iigb_modules}/openmpi/2.0.1-slurm-16.05.4/lib
prepend-path    LD_LIBRARY_PATH  ${iigb_modules}/openmpi/2.0.1-slurm-16.05.4/lib:${iigb_modules}/openmpi/2.0.1-slurm-16.05.4/lib/openmpi
prepend-path    MANPATH          ${iigb_modules}/openmpi/2.0.1-slurm-16.05.4/share/man

# Pre-loading this is causing compilation and linking warnings, best to keep it only where it is needed (ie. Maker)
#setenv          LD_PRELOAD       ${iigb_modules}/openmpi/2.0.1-slurm-16.05.4/lib/libmpi.so

module      use    ${modules_dir} 

