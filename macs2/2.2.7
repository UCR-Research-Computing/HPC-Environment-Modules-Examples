#%Module1.0#####################################################################
##
## macs2 modulefile
##
proc ModulesHelp { } {
        global version prefix

        puts stderr "\tmacs2- Adds macs2 to your path"
}

module-whatis	"macs2-2.2.7"

set      hpcc_modules    $::env(HPCC_MODULES)

# Load miniconda
module load miniconda3

# Do not activate conda
#if { [module-info mode load] || [module-info mode switch2] } {
#    puts stdout "module load miniconda3; conda activate ${hpcc_modules}/macs2/2.2.7;"
#} elseif { [module-info mode remove] && ![module-info mode switch3] } {
#    puts stdout "conda deactivate;"
#}

# Instead, set alias that will activate conda
# This is r shell compatible
source-sh bash ${hpcc_modules}/macs2/2.2.7/lib/python3.6/venv/scripts/common/activate
set-alias macs2 "conda run -p ${hpcc_modules}/macs2/2.2.7 macs2"

# RStudio need PATH to be explicitly set
prepend-path    PATH    ${hpcc_modules}/macs2/2.2.7/bin

